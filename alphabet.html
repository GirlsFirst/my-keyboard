<!DOCTYPE html>
<html>
<head>
	<title>My Alphabet Keyboard</title>
</head>
<body>
<!--<input type="button" class="alpha" name="a" value="a">-->
<input id="createKeyboard" type="button" class="setup" name="setup" value="Enter Keyboard" onclick="createKeyboard()">
<span id="keyboard"></span>

<script type="text/javascript">
//TO DO: 
// 1. refactor by putting all js into another file
// 2. run locally
// 3. update/add a feature
// 4. run locally (Why not just re-deploy? Faster feedback than deploying)
// 5. make pretty



	function createKeyboard() {
		var myAlphabetTop = ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"],
			myAlphabetMiddle = ["a", "s", "d", "f", "g", "h", "j", "k", "l"],
			myAlphabetBottom = ["z", "x", "c", "v", "b", "n", "m"],
			keyboard = document.getElementById("keyboard");

			makeAlphaRow(myAlphabetTop, keyboard);
			makeAlphaRow(myAlphabetMiddle, keyboard);
			makeAlphaRow(myAlphabetBottom, keyboard);
		    makeShiftKey(keyboard);

		// hide "Create Keyboard" button
		   var createKeyboardBtn = document.getElementById("createKeyboard");
		    createKeyboardBtn.type = "hidden";
		
	}

	function makeAlphaRow(myAlphaKeys, keyboard) {
		for (letter of myAlphaKeys) {
			var newKey = document.createElement("input"),
		    	node = document.createTextNode(letter);

		    newKey.appendChild(node);
		    newKey.type = "button";
		    newKey.className = "alpha";
		    newKey.name = letter;
		    newKey.value = letter;
		    newKey.setAttribute("audiotype", "name");
		    var playAudio = "playAudio(\"" + letter + "\");";
		    newKey.setAttribute("onclick", playAudio);

		    keyboard.appendChild(newKey);

		}
		keyboard.appendChild(document.createElement("br"));
	}

	function playAudio(letter) {
		var audio = new Audio('./myKeyboard/audio/letters/name/' + letter + '.m4a');
		audio.play();
	}

	function makeShiftKey(keyboard) {
		var shiftKey = document.createElement("input"),
		   shiftNode = document.createTextNode("shift");

		   shiftKey.type = "button";
		   shiftKey.className = "helpers";
		   shiftKey.name = "shift";
		   shiftKey.value = "shift";
		   shiftKey.id = "shift";
		   shiftKey.setAttribute("isupper", false);
		   shiftKey.setAttribute("onclick", "toUpper();");

		   keyboard.appendChild(document.createElement("br"));
		   keyboard.appendChild(shiftKey);
	}

	function toUpper() {
		console.log("Shift key pressed!")
		var alphaKeyElements = document.getElementsByClassName("alpha");
		for (key of alphaKeyElements) {
			if(key.value != key.value.toUpperCase()) { 
				key.value = key.value.toUpperCase(); 
				document.getElementById("shift").setAttribute("isupper", true);
			} else { 
				key.value = key.value.toLowerCase();
				document.getElementById("shift").setAttribute("isupper", false);
			}
		}

	}
	
</script>

</body>
</html>